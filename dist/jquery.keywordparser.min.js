/*
 *  jQuery Keyword Parser - v0.1.0
 *  Simple keyword parser.
 *  http://jqueryboilerplate.com
 *
 *  Made by Mike Kornelson
 *  Under GPL License
 */
!function(a,b,c){function d(b,c){this.element=b,this.settings=a.extend({},f,c),this._defaults=f,this._name=e,this.init()}var e="keywordparser",f={event:"keyup",trigger:{which:221},filters:{},match:/{([^{}<>]+)}/g,append:"&nbsp;",DEBUG:!1};a.extend(d.prototype,{init:function(){var a=this;rangy.init(),a._bindEventWrapper()},_bindEventWrapper:function(){var b=this;a(b.element).on(b.settings.event,function(a){var c=!0;jQuery.each(Object.keys(b.settings.trigger),function(d,e){b.settings.trigger[e]!==a[e]&&(c=!1)}),c&&b._triggerEvent()})},_triggerEvent:function(){var a=this,b=rangy.saveSelection(),c=rangy.getSelection().getRangeAt(0);c.selectNode(c.startContainer);var d=c.startContainer.innerHTML,e=a.settings.match.exec(d);if(e){var f=a._decodeEntities(e[1]),g=a.settings.filters[f];g&&(d=d.replace(e[0],g+a.settings.append),c.startContainer.innerHTML=d,rangy.restoreSelection(b))}},_decodeEntities:function(a){var b=c.createElement("textarea");return b.innerHTML=a,b.value},DLOG:function(){if(this.settings.DEBUG)for(var a in arguments)console.log(e+": ",arguments[a])}}),a.fn[e]=function(b){if(!a(this).length)return a(this);var c=a(this).data(e);return c&&0!==b.indexOf("_")&&c[b]&&"function"==typeof c[b]?c[b](Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error(c?0===b.indexOf("_")?"Method "+b+" is private!":"Method "+b+" does not exist.":"Plugin must be initialised before using method: "+b):(c=new d(a(this),b),a(this).data(e,c),a(this))}}(jQuery,window,document);